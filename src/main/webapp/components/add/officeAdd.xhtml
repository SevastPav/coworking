<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<p:dialog styleClass="modal-window"
          header="Добавить офис"
          maximizable="true"
          widgetVar="officeAddDlg" modal="true" id="officeAddDlg">
    <h:form enctype="multipart/form-data">
        <div class="container">
            <p:messages id="messages" showDetail="true" closable="true">
                <p:autoUpdate/>
            </p:messages>
            <div class="row pt-3">
                <div class="col-3">
                    <h:outputLabel for="officeTitle" value="Название офиса"/>
                </div>
                <div class="col">
                    <p:inputText id="officeTitle" value="#{officeRegistrationBean.officeDto.title}"/>
                </div>
            </div>
            <div class="row pt-3">
                <div class="col-3">
                    <h:outputLabel for="officeDescription" value="Описание офиса"/>
                </div>
                <div class="col">
                    <p:inputTextarea id="officeDescription" rows="6" cols="33"
                                     value="#{officeRegistrationBean.officeDto.description}"/>
                </div>
            </div>
            <div class="row pt-3">
                <div class="col-3">
                    <h:outputLabel for="address" value="Адрес офиса"/>
                </div>
                <div class="col">
                    <p:inputText id="address" value="#{officeRegistrationBean.officeDto.address}"/>
                </div>
            </div>
            <div class="row pt-3">
                <div class="col-3">
                    <h:outputLabel for="pricePerHour" value="Цена аренды за час"/>
                </div>
                <div class="col">
                    <p:inputNumber id="pricePerHour" value="#{officeRegistrationBean.officeDto.pricePerHour}"/>
                </div>
            </div>
            <c:if test="#{not officeRegistrationBean.edit}">
                <div class="row pt-3">
                    <div class="col-3">
                        <h:outputLabel value="Главное фото"/>
                    </div>
                    <div class="col">
                        <p:fileUpload listener="#{officeRegistrationBean.uploadMainPhoto}"
                                      auto="true"/>
                    </div>
                </div>
                <div class="row pt-3">
                    <div class="col-3">
                        <h:outputLabel value="Фотографии"/>
                    </div>
                    <div class="col">
                        <p:fileUpload listener="#{officeRegistrationBean.uploadPhotos}"
                                      auto="true"/>
                    </div>
                </div>
                <div class="row pt-3">
                    <div class="col-3">
                        <h:outputLabel value="Карта офиса"/>
                    </div>
                    <div class="col">
                        <p:fileUpload listener="#{officeRegistrationBean.uploadMapImage}"
                                      auto="true"/>
                    </div>
                </div>
                <div class="row pt-3">
                    <div class="col-3">
                        <h:outputLabel for="admin" value="Администратор"/>
                    </div>
                    <div class="col">
                        <p:selectOneMenu id="admin" value="#{officeRegistrationBean.adminId}">
                            <f:selectItems value="#{serviceHolder.userProfileService.adminUsersMap}"/>
                        </p:selectOneMenu>
                    </div>
                </div>
            </c:if>
            <c:if test="#{not officeRegistrationBean.edit}">
                <div class="row pt-3">
                    <div class="col-3">
                        <h:outputLabel for="city" value="Город"/>
                    </div>
                    <div class="col">
                        <p:selectOneMenu id="city" value="#{officeRegistrationBean.cityId}">
                            <f:selectItems value="#{serviceHolder.cityService.citiesMap}"/>
                        </p:selectOneMenu>
                    </div>
                </div>
            </c:if>

            <div class="row pt-3">
                <div class="col-3">
                    <h:outputLabel for="metros" value="Ближайшие метро"/>
                </div>
                <div class="col">
                    <p:selectCheckboxMenu id="metros" value="#{officeRegistrationBean.metroIds}"
                                          label="Метро"
                                          filter="true" filterMatchMode="startsWith" panelStyle="width:500px;">
                        <f:selectItems value="#{serviceHolder.metroService.metrosMap}"/>
                    </p:selectCheckboxMenu>
                </div>
            </div>

            <div class="row pt-3">
                <div class="col-3">
                    <h:outputLabel for="features" value="Поддерживаемые функции"/>
                </div>
                <div class="col">
                    <p:selectCheckboxMenu id="features" value="#{officeRegistrationBean.featuresIds}"
                                          label="Функции"
                                          filter="true" filterMatchMode="startsWith" panelStyle="width:500px;">
                        <f:selectItems value="#{serviceHolder.featureService.featuresTypesMap}"/>
                    </p:selectCheckboxMenu>
                </div>
            </div>

            <div class="row pt-3">
                <div class="col-3">
                    <h:outputLabel for="rent" value="Поддерживаемые типы аренды"/>
                </div>
                <div class="col">
                    <p:selectCheckboxMenu id="rent" value="#{officeRegistrationBean.rentIds}"
                                          label="Типы аренды"
                                          filter="true" filterMatchMode="startsWith" panelStyle="width:500px;">
                        <f:selectItems value="#{serviceHolder.rentTypeService.rentTypesMap}"/>
                    </p:selectCheckboxMenu>
                </div>
            </div>

            <div class="row pt-3">
                <div class="col-3">
                    <h:outputLabel for="duration" value="Поддерживаемые длительности аренды"/>
                </div>
                <div class="col">
                    <p:selectCheckboxMenu id="duration" value="#{officeRegistrationBean.durationIds}"
                                          label="Типы продолжительности"
                                          filter="true" filterMatchMode="startsWith" panelStyle="width:500px;">
                        <f:selectItems value="#{serviceHolder.durationTypeService.durationTypesMap}"/>
                    </p:selectCheckboxMenu>
                </div>
            </div>

            <c:if test="#{officeRegistrationBean.edit}">
                <div class="row pt-3">
                    <div class="col-4">
                        <p:commandButton value="СОХРАНИТЬ" actionListener="#{officeRegistrationBean.editEntity}"
                                         update="@form" ajax="true"/>
                    </div>
                    <div class="col text-right">
                        <p:commandButton value="НЕ СОХРАНЯТЬ"
                                         actionListener="#{officeRegistrationBean.updateForEditDto}"
                                         oncomplete="PF('officeAddDlg').hide()" ajax="true"/>
                    </div>
                </div>
            </c:if>
            <c:if test="#{not officeRegistrationBean.edit}">
                <div class="row pt-3">
                    <div class="col-4">
                        <p:commandButton value="СОХРАНИТЬ" actionListener="#{officeRegistrationBean.createEntity}"
                                         update="@form" ajax="true"/>
                    </div>
                    <div class="col text-right">
                        <p:commandButton value="НЕ СОХРАНЯТЬ" actionListener="#{officeRegistrationBean.updateDto}"
                                         oncomplete="PF('officeAddDlg').hide()" ajax="true"/>
                    </div>
                </div>
            </c:if>
        </div>
    </h:form>
    <p:ajax event="close" update="officeAddDlg"/>
</p:dialog>
</html>